<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Czysta Animacja 40-100%</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
        :root {
            --ing-orange: #FF6200;
            --ing-navy: #1F1F5F;     /* Ciemny granat dla kontrastu na białym */
            --bg-track: #E5E7EB;     /* Jasnoszary dla tła paska */
        }

        body {
            background-color: #ffffff;
            font-family: 'Inter', sans-serif;
            overflow: hidden;
            user-select: none;
            color: var(--ing-navy);
        }

        /* --- LICZNIK --- */
        .hero-number {
            font-size: clamp(6rem, 15vw, 16rem);
            font-weight: 900;
            line-height: 0.9;
            letter-spacing: -0.04em;
            /* Zmiana na ciemny gradient */
            background: linear-gradient(to bottom, #1F1F5F 40%, #585885 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-variant-numeric: tabular-nums;
            position: relative;
        }

        /* Styl po osiągnięciu 100% */
        .hero-number.success {
            background: linear-gradient(to bottom right, #FF6200 20%, #FF8F33 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        /* --- PASEK POSTĘPU --- */
        .bar-track {
            background: var(--bg-track);
            box-shadow: inset 0 2px 6px rgba(0,0,0,0.05);
            border-radius: 20px;
            overflow: hidden;
            position: relative;
        }

        .bar-fill {
            background: linear-gradient(90deg, #FF6200 0%, #FF8F33 50%, #FFB885 100%);
            box-shadow: 0 0 20px rgba(255, 98, 0, 0.3);
            border-radius: 20px;
            height: 100%;
            position: relative;
            transform: translateZ(0);
            width: 40%; /* Startowa wartość */
        }
        
        /* Połysk na pasku */
        .bar-fill::after {
            content: '';
            position: absolute;
            top: 0; left: 0; bottom: 0; right: 0;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.6), transparent);
            transform: translateX(-100%);
            animation: shimmer 2s infinite;
        }
        @keyframes shimmer { 100% { transform: translateX(100%); } }

        /* Znacznik startu */
        .ghost-marker {
            position: absolute;
            height: 100%;
            width: 2px;
            background: #d1d5db; /* Szary znacznik */
            border-right: 1px dashed #9ca3af;
            z-index: 10;
        }

        /* --- EFEKTY KOŃCOWE --- */
        .confetti {
            position: absolute;
            width: 10px;
            height: 10px;
            background-color: var(--ing-orange);
            opacity: 0;
        }

        .shake-screen { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        .start-overlay { 
            color: #9ca3af;
            transition: opacity 0.5s; 
        }
    </style>
</head>
<body class="h-screen w-screen flex flex-col items-center justify-center relative" onclick="startAnimation()">

    <div class="w-full max-w-5xl px-6 text-center flex flex-col items-center gap-12 relative z-20">
        
        <div class="space-y-2">
            <h2 class="text-orange-600 font-bold tracking-[0.3em] uppercase text-sm md:text-base">Raport Roczny</h2>
            <h1 class="text-3xl md:text-5xl text-[#1F1F5F] font-bold tracking-tight">Wzrost Efektywności</h1>
        </div>

        <div class="w-full flex flex-col items-center">
            <div class="relative mb-8">
                <div class="flex items-baseline justify-center">
                    <span id="counter" class="hero-number">40</span>
                    <span class="text-4xl md:text-6xl font-bold text-orange-500 ml-2 opacity-100">%</span>
                </div>
            </div>

            <div class="w-full h-12 md:h-16 bar-track relative">
                <div class="ghost-marker" style="left: 40%;">
                    <div class="absolute -top-8 left-1/2 -translate-x-1/2 text-xs text-gray-400 uppercase tracking-wider">Start</div>
                </div>
                <div id="bar" class="bar-fill flex items-center justify-end pr-4">
                    <div class="w-1 h-full bg-white opacity-40"></div>
                </div>
            </div>

            <div class="flex justify-between w-full mt-4 px-1 text-gray-400 font-medium text-sm md:text-base h-6">
                <span>Q1 2024</span>
                <span id="final-label" class="opacity-0 transition-all duration-1000 text-orange-600 font-bold transform translate-y-2">CEL OSIĄGNIĘTY</span>
            </div>
        </div>
    </div>

    <div id="start-msg" class="start-overlay absolute bottom-10 text-sm uppercase tracking-widest animate-pulse cursor-pointer z-50">
        Kliknij, aby uruchomić
    </div>

    <div id="particles" class="absolute inset-0 pointer-events-none z-30 overflow-hidden"></div>

    <script>
        let isAnimating = false;
        let animationFinished = false;

        const counter = document.getElementById('counter');
        const bar = document.getElementById('bar');
        const finalLabel = document.getElementById('final-label');
        const startMsg = document.getElementById('start-msg');

        // Konfiguracja
        const CONFIG = {
            startVal: 40,
            endVal: 100,
            duration: 2000, // Czas trwania w ms
            easing: (t) => t === 1 ? 1 : 1 - Math.pow(2, -10 * t) // Płynne hamowanie (easeOutExpo)
        };

        function startAnimation() {
            if (isAnimating || animationFinished) return;
            
            isAnimating = true;
            startMsg.style.opacity = '0'; // Ukryj napis "Kliknij"

            const startTime = performance.now();

            function update(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / CONFIG.duration, 1);
                const easedProgress = CONFIG.easing(progress);

                const currentVal = CONFIG.startVal + (easedProgress * (CONFIG.endVal - CONFIG.startVal));
                
                // Aktualizacja DOM
                bar.style.width = `${currentVal}%`;
                counter.innerText = Math.floor(currentVal);

                if (progress < 1) {
                    requestAnimationFrame(update);
                } else {
                    finishAnimation();
                }
            }
            requestAnimationFrame(update);
        }

        function finishAnimation() {
            isAnimating = false;
            animationFinished = true;
            
            // Stan końcowy
            counter.innerText = "100";
            counter.classList.add('success'); // Zmiana koloru licznika na pomarańczowy
            
            finalLabel.classList.remove('opacity-0', 'translate-y-2'); // Pokaż napis "Cel Osiągnięty"
            
            // Efekt potrząśnięcia ekranem
            document.body.classList.add('shake-screen');
            setTimeout(() => document.body.classList.remove('shake-screen'), 500);

            spawnConfetti();
        }

        function spawnConfetti() {
            const container = document.getElementById('particles');
            const count = 150;
            // Kolory dostosowane do białego tła (brak białego konfetti)
            const colors = ['#FF6200', '#1F1F5F', '#FF9E4D', '#cbd5e1']; 
            
            const barRect = bar.getBoundingClientRect();
            const originX = barRect.right; // Wylatują z końca paska
            const originY = barRect.top + (barRect.height / 2);

            for (let i = 0; i < count; i++) {
                const p = document.createElement('div');
                p.classList.add('confetti');
                const bg = colors[Math.floor(Math.random() * colors.length)];
                const size = Math.random() * 8 + 4;
                const angle = Math.random() * Math.PI * 2;
                const velocity = Math.random() * 20 + 10; 
                
                p.style.backgroundColor = bg;
                p.style.width = `${size}px`;
                p.style.height = `${size}px`;
                p.style.left = `${originX}px`;
                p.style.top = `${originY}px`;
                p.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
                
                container.appendChild(p);

                let x = 0, y = 0;
                let vx = Math.cos(angle) * velocity;
                let vy = Math.sin(angle) * velocity;
                const gravity = 0.6;
                const friction = 0.92;
                let opacity = 1;

                const anim = () => {
                    vx *= friction; 
                    vy *= friction; 
                    vy += gravity;
                    x += vx; 
                    y += vy; 
                    opacity -= 0.01; // Szybsze znikanie

                    p.style.transform = `translate(${x}px, ${y}px) rotate(${x * 10}deg)`;
                    p.style.opacity = opacity;

                    if (opacity > 0) requestAnimationFrame(anim); 
                    else p.remove();
                };
                requestAnimationFrame(anim);
            }
        }
    </script>
</body>
</html>